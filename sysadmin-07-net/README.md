1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?

    LINUX:
    
        vagrant@vagrant:~$ ip -c -br link
        lo               UNKNOWN        00:00:00:00:00:00 <LOOPBACK,UP,LOWER_UP>
        eth0             UP             00:08:2d:52:62:cf <BROADCAST,MULTICAST,UP,LOWER_UP>
        
    WINDOWS:
    
        PS C:\Users\1> ipconfig /all

2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

    Для этого используется протокол LLDP. В Linux для этого есть пакет lldpd и команда:
            
        vagrant@vagrant:~$ lldpctl

3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

    Для разделения L2 коммутатора на несколько виртуальных сетей используется технология VLAN.
        
    В Linux для этого есть пакет vlan. Настройки подынтерфейсов VLANов в Linux указываются в файле /etc/network/interfaces. 
    
    Настройка VLAN при загрузке:

        auto vlan1400
        iface vlan1400 inet static
                address 192.168.1.1
                netmask 255.255.255.0
                vlan_raw_device eth0
                
    или
    
        auto eth0.1400
        iface eth0.1400 inet static
                address 192.168.1.1
                netmask 255.255.255.0
                vlan_raw_device eth0
                
    Параметр vlan_raw_device указывает на каком сетевом интерфейсе должен создаваться новый интерфейс vlan1400.
    Для того чтобы информация о созданных VLAN'ах сохранилась после перезагрузки, необходимо добавить её в файл /etc/network/interfaces.
    
    Для просмотра информации о влан-интерфейсе в команде ip link show необходимо задать ключ -d[etails]:

        $ip -details link show dev mgmt
        
    Для изменения параметров влан-интерфейса используется команда ip link set, с обязательным указанием type vlan:

        ip link set dev VLANNAME type vlan OPTION VALUE

4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

    Типы агрегирования каналов в Linux:
     - динамический - LACP (Link Aggregation Control Protocol)
     - статическое агрегирование без использования протоколов

    В зависимости от модели коммутатора, могут поддерживаться такие методы балансировки:
     - по MAC-адресу отправителя или MAC-адресу получателя или учитывая оба адреса
     - по IP-адресу отправителя или IP-адресу получателя или учитывая оба адреса
     - по номеру порта отправителя или номеру порта получателя или учитывая оба порта
    
    При выборе метода балансировки, необходимо учитывать топологию сети, каким образом передается трафик.
    
    Опции для балансировки нагрузки:
        
        mode=0 (balance-rr)
    Этот режим используется по-умолчанию, если в настройках не указано другое. balance-rr обеспечивает балансировку нагрузки и отказоустойчивость. В данном режиме пакеты отправляются "по кругу" от первого интерфейса к последнему и сначала. Если выходит из строя один из интерфейсов, пакеты отправляются на остальные оставшиеся.При подключении портов к разным коммутаторам, требует их настройки.

        mode=1 (active-backup)
    При active-backup один интерфейс работает в активном режиме, остальные в ожидающем. Если активный падает, управление передается одному из ожидающих. Не требует поддержки данной функциональности от коммутатора.

        mode=2 (balance-xor)
    Передача пакетов распределяется между объединенными интерфейсами по формуле ((MAC-адрес источника) XOR (MAC-адрес получателя)) % число интерфейсов. Один и тот же интерфейс работает с определённым получателем. Режим даёт балансировку нагрузки и отказоустойчивость.

        mode=3 (broadcast)
    Происходит передача во все объединенные интерфейсы, обеспечивая отказоустойчивость.

        mode=4 (802.3ad)
    Это динамическое объединение портов. В данном режиме можно получить значительное увеличение пропускной способности как входящего так и исходящего трафика, используя все объединенные интерфейсы. Требует поддержки режима от коммутатора, а так же (иногда) дополнительную настройку коммутатора.

        mode=5 (balance-tlb)
    Адаптивная балансировка нагрузки. При balance-tlb входящий трафик получается только активным интерфейсом, исходящий - распределяется в зависимости от текущей загрузки каждого интерфейса. Обеспечивается отказоустойчивость и распределение нагрузки исходящего трафика. Не требует специальной поддержки коммутатора.

        mode=6 (balance-alb)
    Адаптивная балансировка нагрузки (более совершенная). Обеспечивает балансировку нагрузки как исходящего (TLB, transmit load balancing), так и входящего трафика (для IPv4 через ARP). Не требует специальной поддержки коммутатором, но требует возможности изменять MAC-адрес устройства.
    
    Пример конфигурации в файле /etc/network/interfaces:

        # Define slaves   
        auto eth0
        iface eth0 inet manual
            bond-master bond0
            bond-primary eth0
            bond-mode active-backup

        auto wlan0
        iface wlan0 inet manual
            wpa-conf /etc/network/wpa.conf
            bond-master bond0
            bond-primary eth0
            bond-mode active-backup

        # Define master
        auto bond0
        iface bond0 inet dhcp
            bond-slaves none
            bond-primary eth0
            bond-mode active-backup
            bond-miimon 100
    

5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

    IP адресов в сети с маской /29:    8, из которых 2 зарезервированных
        
    Количество /29 подсетей, которые можно получить из сети с маской /24:    32 подсети
        
    Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24:
        
            Network:   10.10.10.0/29         00001010.00001010.00001010.00000 000 (Class A)
            Broadcast: 10.10.10.7            00001010.00001010.00001010.00000 111
            HostMin:   10.10.10.1            00001010.00001010.00001010.00000 001
            HostMax:   10.10.10.6            00001010.00001010.00001010.00000 110
            Hosts/Net: 6                     (Private Internet)


            Network:   10.10.10.8/29         00001010.00001010.00001010.00001 000 (Class A)
            Broadcast: 10.10.10.15           00001010.00001010.00001010.00001 111
            HostMin:   10.10.10.9            00001010.00001010.00001010.00001 001
            HostMax:   10.10.10.14           00001010.00001010.00001010.00001 110
            Hosts/Net: 6                     (Private Internet)


            Network:   10.10.10.16/29        00001010.00001010.00001010.00010 000 (Class A)
            Broadcast: 10.10.10.23           00001010.00001010.00001010.00010 111
            HostMin:   10.10.10.17           00001010.00001010.00001010.00010 001
            HostMax:   10.10.10.22           00001010.00001010.00001010.00010 110
            Hosts/Net: 6                     (Private Internet)


6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.

    Из сети 100.64.0.0/10 Carrier-Grade NAT с маской 26
    
    Например подсеть:
    
            Network:   100.64.0.0/26         01100100.01000000.00000000.00 000000 (Class A)
            Broadcast: 100.64.0.63           01100100.01000000.00000000.00 111111
            HostMin:   100.64.0.1            01100100.01000000.00000000.00 000001
            HostMax:   100.64.0.62           01100100.01000000.00000000.00 111110
            Hosts/Net: 62

7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?

    В Windows:
     
        Посмотреть таблицу ARP:     
            PS C:\Users\1> arp -a
            
        Очистить ARP кеш:
            netsh interface ip delete arpcache
            
        Удалить только один IP 192.168.100.25 из ARP таблицы:
            arp -d 192.168.100.25            
            
    В Linux:
     
        Посмотреть таблицу ARP:     
            vagrant@vagrant:~$  ip neighbour
            
        Очистить ARP кеш:
            sudo ip neigh flush all
            
        Удалить IP 192.168.1.5 из ARP таблицы на интерфейсе eth0:
            ip neigh del 192.168.1.5 dev eth0
 
